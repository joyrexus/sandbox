<!DOCTYPE html>
<meta charset="utf-8">
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://coffeescript.org/extras/coffee-script.js"></script>
<style>
  body {
    margin: 80px;
    font-family: "Helvetica Neue";
    font-weight: 100;
    font-size: 400px;
    color: #333;
  }
</style>
<body>
<script type="text/coffeescript">

  say = (msg) ->
    event = d3.dispatch 'click'
    clickable = (selection) -> selection.append('div').text(msg)
        .on('click', -> event.click(msg))
    d3.rebind clickable, event, 'on'

  d3.select('body').call say('hi!').on('click', (msg) -> alert msg)

</script>

