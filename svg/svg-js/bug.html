<!DOCTYPE html>
<meta charset="utf-8">
<script src="lib/svg.js"></script>
<script src="lib/coffee-script.js"></script>
<style>
  rect {
    fill: none;
    stroke: #999;
    stroke-width: 2;
  }
  .vector {
    stroke: #555;
    stroke-width: 6;
    stroke-opacity: 0.6;
  }
  #bug {
    fill: aliceblue;
    stroke: steelblue;
    stroke-width: 3;
  }
</style>
<body>
  <div id="canvas"></div>

<script type="text/coffeescript">
  class Point
    constructor: (@x, @y) ->

  class Vector
    constructor: (@origin, @end) ->

  style = defaultStyle = 
    width: 3
    opacity: .5
    color: '#555'

  draw = SVG('canvas').size(300, 300)

  vector = (v, style=defaultStyle) ->
    draw.line(v.origin.x, v.origin.y, v.end.x, v.end.y)
      .stroke(style)

  A = new Point 40, 0
  B = new Point 200, 300
  X = new Vector A, B
  x = vector(X)

  class Bug
    style = 
      fill: "aliceblue"
      stroke: "steelblue"
      'stroke-width': 3

    constructor: (@x, @y, @size=20) ->
      @viz = draw.circle(@size)
        .attr("id", "bug")
        .cx(@x)
        .cy(@y)

    move: (x, y) ->
      @x = x
      @y = y
      @viz.animate(2000, '-', 500).center(x, y)

  bug = new Bug A.x, A.y

  draw.rect(300, 300)

  bug.move(B.x, B.y)

</script>

