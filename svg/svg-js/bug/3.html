<!DOCTYPE html>
<meta charset="utf-8">
<script src="../lib/svg.js"></script>
<script src="../lib/coffee-script.js"></script>
<script src="lib/svg.bug.js"></script>
<style>
  rect {
    fill: none;
    stroke: #999;
    stroke-width: 2;
  }
  .vector {
    stroke: #555;
    stroke-width: 6;
    stroke-opacity: 0.6;
  }
  #bug {
    fill: aliceblue;
    stroke: steelblue;
    stroke-width: 3;
  }
</style>
<body>
  <div id="canvas"></div>

<script type="text/coffeescript">
  w = 300   # canvas width
  h = 300   # canvas height
  d = 20    # diameter of bug

  draw = SVG('canvas').size(w, h)

  A = new Point 40, 20
  B = new Point 200, 300
  C = new Point 300, 150

  velocity = new Point 2, 2

  ###
  X = new Vector A, B
  Y = new Vector B, C
  Z = new Vector C, A

  x = draw.vector(X)
  y = draw.vector(Y)
  z = draw.vector(Z)
  ###

  bug = draw.circle(d).attr("id", "bug").center(A.x, A.y)

  move = =>
    x = bug.x()
    y = bug.y()
    
    velocity.x *= if (x+d > h) or (x+d < 0) then -1 else 1
    velocity.y *= if (y+d > w) or (y+d < 0) then -1 else 1
    bug.move(x+velocity.x, y+velocity.y)

  timer = setInterval move, 17
  stop = -> clearInterval timer
  setTimeout stop, 8000
    

</script>
